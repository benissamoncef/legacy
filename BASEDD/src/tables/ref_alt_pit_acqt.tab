/*X  Fichier : $Id: REF_ALT_PIT_ACQT.tab,v 1.0 2022/10/06 09:31:00 gaborit Exp $      Release : $Revision: 1.5 $        Date : $Date: 2022/10/06 09:31:00 $
------------------------------------------------------
* STERIA *  PROJET MAGISTRA 
------------------------------------------------------
* SOUS-SYSTEME  BASEDD
------------------------------------------------------
* FICHIER REF_ALT_PIT_ACQT.tab
------------------------------------------------------
* DESCRIPTION DE LA PROCEDURE :
*
* creation de la table REF_ALT_PIT_ACQT
*
------------------------------------------------------
* HISTORIQUE :
*
* C.T.	06/10/22	: Creation
-----------------------------------------------------*/


/* ============================================================ */
/*   Nom de la base   :  MIGRAZUR                               */
/*   Nom de SGBD      :  SYBASE10                               */
/*   Date de creation :  29/07/94                              */
/* ============================================================ */

/* ============================================================ */
/*   Table : REF_ALT_PIT_ACQT                                            */
/* ============================================================ */

/* Suppression de la table si elle existe */
/* ===========================*/
if exists (select * from sysobjects where name = 'REF_ALT_PIT_ACQT' and type = 'U')
	begin
	drop table REF_ALT_PIT_ACQT
	end
go

declare @nom_base varchar(10)

/* nom de la base courante */
select @nom_base = db_name()

/*
*  Fonctionalit? de la table
*  -------------------------
*  Contient les alertes des doublons sur la consignation bouchon
*
*  Description des colonnes de la table
*  ------------------------------------
*	     
*        reference               : reference du bouchon        
*        numAutoroure            : num�ro d'autoroute       
*        numAlerte               : num�ro de l'alerte       
*        hashcode                : hashcode contenant les infos : num autoroute, sens et pr de t�te et de queue, info trafic ainsi que date de d�but et de fin.        
*        isParent                : le bouchon est-il le parent : oui/non        
*/


create table REF_ALT_PIT_ACQT
(
	
	reference                             varchar(50)             not null,
	numAutoroute                          tinyint                 not null,
	numAlerte                             int                     not null,
	hashcodeFmc                           varchar(50)             null,
	isParent                              bit	                  not null,
)
/* ajout des droits a public*/
grant all on REF_ALT_PIT_ACQT to public

/* ========================================================================== */
/*   creation des cles primaires et des index en fonction de la base courante */
/* ========================================================================== */
if @nom_base = 'EXP'
	begin
	/* ========================================================== */
	/*   Cle primaire : reference, numAutoroure                   */
	/* ========================================================== */
	execute sp_primarykey REF_ALT_PIT_ACQT, reference, numAutoroute

	/* ========================================================== */
	/*   Index : REF_ALT_PIT_ACQT_PK                              */
	/* ========================================================== */
	create unique index REF_ALT_PIT_ACQT_PK on REF_ALT_PIT_ACQT (reference, numAutoroute)
	end
else if @nom_base = 'HIS'
        begin
        /* ========================================================== */
        /*   Cle primaire : reference, numAutoroure                   */
        /* ========================================================== */
        execute sp_primarykey REF_ALT_PIT_ACQT, reference, numAutoroute

        /* ========================================================== */
        /*   Index : REF_ALT_PIT_ACQT_PK                              */
        /* ========================================================== */
        create unique index REF_ALT_PIT_ACQT_PK on REF_ALT_PIT_ACQT (reference, numAutoroute)
        end

go